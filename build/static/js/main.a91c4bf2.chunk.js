(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__3_Sy9",Button:"Toolbar_Button__bzbWD",ButtonInner:"Toolbar_ButtonInner__1Buyj"}},,,,,,,,,function(e,t,n){e.exports={Form:"Search_Form__HWwpF",Input:"Search_Input__6iwdW",Button:"Search_Button__3G05N",Clear:"Search_Clear__1d3AY",Submit:"Search_Submit__lOJCt",InputWrapper:"Search_InputWrapper__eGlwD"}},,function(e,t,n){e.exports={Item:"Item_Item__2-C3p",ItemActive:"Item_ItemActive__2doUP"}},function(e,t,n){e.exports={Layout:"Layout_Layout__3xERz",Toolbar:"Layout_Toolbar__1myXt",List:"Layout_List__1jYUz",Content:"Layout_Content__lQM3N"}},,,,function(e,t,n){e.exports={CompileItem:"CompileItem_CompileItem__3d_J7",Content:"CompileItem_Content__1UDwP",Date:"CompileItem_Date__XwCq-"}},,,,,,,,function(e,t,n){e.exports={List:"List_List__2VB9x",Title:"List_Title__1FHGN",Date:"List_Date__2deZt"}},,function(e,t,n){e.exports={Editor:"Editor_Editor__3OeT5"}},function(e,t,n){e.exports=n(45)},,,,,,,,,,,function(e,t,n){e.exports={App:"App_App__3_czo"}},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(5),i=n(3),u=n(1),d=n(24),s=n.n(d),m="LOAD_FROM_STORAGE",h="CREATE_RECORD",p="EDIT_RECORD",_="EDIT_COMPILE_ITEM",E="CHANGE_CURRENT_RECORD",C="SAVE_TO_LOCAL_STORAGE",I="DELETE_ITEM",f="SEARCH_ITEM",b="DIARY",g={records:[],editItem:!0,searchItem:""};var v=Object(l.b)({diary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=JSON.parse(localStorage.getItem(b));if(n)return Object(u.a)({},e,n);case C:return localStorage.setItem(b,JSON.stringify(e)),Object(u.a)({},e);case E:return Object(u.a)({},e,{currentRecord:Object(u.a)({},t.record)});case h:var a={id:s()(),name:"",content:"",createdAt:"",changeAt:"",compileItem:""},r=new Date,c=r.toLocaleDateString()+" "+r.getHours()+":"+r.getMinutes();return a.createdAt=c,Object(u.a)({},e,{records:[].concat(Object(i.a)(e.records),[a]),currentRecord:a,editItem:!0});case _:return Object(u.a)({},e,{editItem:!0});case p:var o=t.record,l=(o.recordId,e.records),d=l.find(function(t){return t.id===e.currentRecord.id});return Object.assign(d,o),Object(u.a)({},e,{records:Object(i.a)(l),currentRecord:Object(u.a)({},d),editItem:!1});case I:var v=Object(i.a)(e.records),R=v.findIndex(function(e){return e.id===t.id});return v.splice(R,1),Object(u.a)({},e,{records:Object(i.a)(v),currentRecord:v[R-1]});case f:return Object(u.a)({},e,{searchItem:t.value});default:return e}}}),R=n(17),O=n(6),y=n(7),S=n(10),j=n(8),N=n(9),D=(n(40),n(2)),L=n.n(D),A=n(11),T=n.n(A),w=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(S.a)(this,Object(j.a)(t).call(this,e))).handleChange=function(e){n.setState({searchValue:e.target.value})},n.handleClear=function(e){n.setState({searchValue:""}),n.props.handleSearchItemChange("")},n.handleSubmit=function(e){e.preventDefault(),n.props.handleSearchItemChange(n.state.searchValue)},n.state={searchValue:""},n}return Object(N.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:T.a.Form,onSubmit:this.handleSubmit},r.a.createElement("div",{className:T.a.InputWrapper},r.a.createElement("button",{className:T.a.Submit,onClick:this.handleSubmit,type:"submit"},r.a.createElement("span",{className:"icon-search"})),r.a.createElement("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",type:"text",className:T.a.Input,value:this.state.searchValue,onChange:this.handleChange}),this.state.searchValue?r.a.createElement("button",{className:T.a.Clear,type:"button",onClick:this.handleClear},r.a.createElement("span",{className:"icon-clear"})):null))}}]),t}(a.Component),B=function(e){return r.a.createElement("div",{className:L.a.Toolbar},r.a.createElement("button",{className:L.a.Button,onClick:e.handleCreateRecord},r.a.createElement("div",{className:L.a.ButtonInner},r.a.createElement("span",{className:"icon-text"}))),e.currentRecord?function(e){return r.a.createElement(a.Fragment,null,r.a.createElement("button",{className:L.a.Button,onClick:e.handleEditCompileItem},r.a.createElement("div",{className:L.a.ButtonInner},r.a.createElement("span",{className:"icon-edit"}))),r.a.createElement("button",{className:L.a.Button,onClick:function(){return e.handleDeleteItem(e.currentRecord.id)}},r.a.createElement("div",{className:L.a.ButtonInner},r.a.createElement("span",{className:"icon-trash"}))))}(e):null,r.a.createElement(w,e))},k=n(26),x=n.n(k),F=n(13),M=n.n(F),V=function(e){var t=e.record,n=t.name,a=t.createdAt,c=(t.changeAt,t.id),o=M.a.Item;return c==e.currentRecord.id&&(o+=" "+M.a.ItemActive),r.a.createElement("div",{className:o,onClick:function(){return e.handleChangeCurrentRecord(e.record)},onDoubleClick:function(t){return e.handleEditCompileItem(e.currentRecord)}},r.a.createElement("div",{className:M.a.Title},n),r.a.createElement("div",{className:M.a.Date},a))},W=function(e){var t=Object(i.a)(e.records).filter(function(t){return t.compileItem.includes(e.searchItem)});return r.a.createElement("div",{className:x.a.List},t.map(function(t){return r.a.createElement(V,{key:t.id,record:t,currentRecord:e.currentRecord,handleChangeCurrentRecord:e.handleChangeCurrentRecord,handleEditCompileItem:e.handleEditCompileItem})}))},H=n(27),G=n.n(H),J=n(28),U=n.n(J),z=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(S.a)(this,Object(j.a)(t).call(this,e))).handleChange=function(e){var t=new Date,a=t.toLocaleDateString()+" "+t.getHours()+":"+t.getMinutes();n.setState({content:e.target.value,changeAt:a})},n.handleBlur=function(){var e=n.state,t=e.content,a=e.changeAt,r=t.replace(/[#*]|(-{3})|(__)|(___)/g,"").split("");r.length>20?(r.length=20,r=r.join(""),r+="..."):r=r.join(""),n.props.handleEditRecord({name:r,compileItem:G()(t),content:t,changeAt:a})},n.cancelEdit=function(e){27==e.which&&n.handleBlur()},n.state={content:n.props.currentRecord.content,changeAt:n.props.currentRecord.changeAt},n}return Object(N.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("textarea",{className:U.a.Editor,autoFocus:!0,value:this.state.content,onChange:this.handleChange,onBlur:this.handleBlur,onKeyUp:this.cancelEdit}))}}]),t}(a.Component),P=n(18),Y=n.n(P),X=function(e){return e.currentRecord?r.a.createElement("div",{className:Y.a.CompileItem},e.currentRecord.changeAt?r.a.createElement("div",{className:Y.a.Date},"\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e: ",e.currentRecord.changeAt):null,r.a.createElement("div",{className:Y.a.Content,dangerouslySetInnerHTML:{__html:e.currentRecord.compileItem},onDoubleClick:function(t){return e.handleEditCompileItem(e.currentRecord)}})):null},q=n(14),K=n.n(q),Q=function(e){var t=e.editItem&&e.currentRecord;return r.a.createElement("div",{className:K.a.Layout},r.a.createElement("div",{className:K.a.Toolbar},r.a.createElement(B,e)),r.a.createElement("div",{className:K.a.List},r.a.createElement(W,e)),r.a.createElement("div",{className:K.a.Content},t?r.a.createElement(z,e):r.a.createElement(X,e)))},Z=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(S.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(c)))).handleCreateRecord=function(){return n.props.handleCreateRecord()},n.handleEditRecord=function(e){return n.props.handleEditRecord(e)},n.handleEditCompileItem=function(e){return n.props.handleEditCompileItem(e)},n.handleChangeCurrentRecord=function(e){return n.props.handleChangeCurrentRecord(e)},n.handleDeleteItem=function(e){return e&&n.props.handleDeleteItem(e)},n.handleSearchItemChange=function(e){return n.props.handleSearchItemChange(e)},n.render=function(){return r.a.createElement(Q,n.props)},n}return Object(N.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.handleLoadStateFromLocalStorage()}},{key:"componentDidUpdate",value:function(){this.props.handleSaveToLocalStorage()}}]),t}(a.Component),$={handleLoadStateFromLocalStorage:function(e){return{type:m,payload:[]}},handleCreateRecord:function(){return{type:h}},handleEditRecord:function(e){return{type:p,record:e}},handleEditCompileItem:function(e){return{type:_,record:e}},handleChangeCurrentRecord:function(e){return{type:E,record:e}},handleSaveToLocalStorage:function(){return{type:C}},handleDeleteItem:function(e){return{type:I,id:e}},handleSearchItemChange:function(e){return{type:f,value:e}}},ee=Object(R.b)(function(e){return{records:e.diary.records,editingRecords:e.diary.editingRecords,currentRecord:e.diary.currentRecord,editItem:e.diary.editItem,searchItem:e.diary.searchItem}},$)(Z),te=(n(41),n(42),n(43),n(44),Object(l.c)(v));o.a.render(r.a.createElement(R.a,{store:te},r.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[29,1,2]]]);
//# sourceMappingURL=main.a91c4bf2.chunk.js.map